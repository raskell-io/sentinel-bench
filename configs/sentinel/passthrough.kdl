// Sentinel Benchmark Configuration - Passthrough
// Minimal configuration for benchmarking core proxy performance
// All optional features disabled for fair comparison

server {
    worker-threads 0  // 0 = auto-detect CPU cores
    max-connections 65535
    graceful-shutdown-timeout-secs 30
}

listeners {
    listener "http" {
        address "0.0.0.0:8080"
        protocol "http"
        request-timeout-secs 60
        keepalive-timeout-secs 75
    }
}

routes {
    route "benchmark" {
        priority "high"
        matches {
            path-prefix "/"
        }
        upstream "backend"
        policies {
            timeout-secs 30
            failure-mode "open"
        }
    }
}

upstreams {
    upstream "backend" {
        targets {
            target {
                address "backend:8080"
                weight 1
            }
        }
        load-balancing "round_robin"
        // Health checks disabled for benchmarking
        connection-pool {
            max-connections 1000
            max-idle 100
            idle-timeout-secs 60
        }
    }
}

limits {
    max-header-size-bytes 8192
    max-header-count 100
    max-body-size-bytes 10485760
    max-connections-per-client 10000
    max-total-connections 65535
}

observability {
    metrics {
        enabled true
        address "0.0.0.0:9090"
        path "/metrics"
    }
    logging {
        level "warn"  // Minimal logging for benchmarks
        format "json"
        access-log {
            enabled false  // CRITICAL: Disable access logging
        }
    }
}
