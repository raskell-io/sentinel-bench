# HAProxy Benchmark Configuration - Passthrough
# Minimal configuration for benchmarking core proxy performance
# All optional features disabled for fair comparison

global
    # Auto-detect CPU cores (or set explicitly)
    nbthread auto
    maxconn 65535
    # Disable logging to syslog for benchmarks
    log /dev/null local0

defaults
    mode http
    timeout connect 10s
    timeout client 60s
    timeout server 30s
    timeout http-keep-alive 75s
    # Disable logging for benchmarks
    option dontlog-normal
    no log
    # HTTP optimizations
    option http-server-close
    option forwardfor except 127.0.0.0/8

frontend http_front
    bind *:8080
    default_backend backend_servers

backend backend_servers
    balance roundrobin
    # Connection pooling
    http-reuse always
    # Backend server
    server backend1 backend:8080 check inter 30s fall 3 rise 2 maxconn 10000

# Stats endpoint for metrics
listen stats
    bind *:9090
    mode http
    stats enable
    stats uri /metrics
    stats refresh 10s
